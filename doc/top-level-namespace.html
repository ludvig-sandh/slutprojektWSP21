<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Top Level Namespace
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/custom.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo;
    
    
    <span class="title">Top Level Namespace</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Top Level Namespace
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></dd>
  </dl>
  
  

  

  
</div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span>
    
  
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#confirm_logged_in-instance_method" title="#confirm_logged_in (instance method)">#<strong>confirm_logged_in</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Se till att användaren är inloggad, annars visas meddelande.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#display_information-instance_method" title="#display_information (instance method)">#<strong>display_information</strong>(mes, link_t, link)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Omdirigerar användaren till en sida som visar information till användaren.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__-instance_method" title="#GET / (instance method)">#<strong>GET /</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Visa startsida.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__categories-instance_method" title="#GET /categories (instance method)">#<strong>GET /categories</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Visar alla kategorier som finns.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__categories__id-instance_method" title="#GET /categories/:id (instance method)">#<strong>GET /categories/:id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Visar alla tider för en viss kategori.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__categories__id_edit-instance_method" title="#GET /categories/:id/edit (instance method)">#<strong>GET /categories/:id/edit</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Visar ett formulär där man kan ändra ett kategorinamn.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__categories_new-instance_method" title="#GET /categories/new (instance method)">#<strong>GET /categories/new</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Visar ett formulär som användaren kan fylla i för att skapa en ny kategori.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__inform-instance_method" title="#GET /inform (instance method)">#<strong>GET /inform</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sida som informerar användaren om nånting.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__login-instance_method" title="#GET /login (instance method)">#<strong>GET /login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Users.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__logout-instance_method" title="#GET /logout (instance method)">#<strong>GET /logout</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__times__category_id__time_id-instance_method" title="#GET /times/:category_id/:time_id (instance method)">#<strong>GET /times/:category_id/:time_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Visar detaljer om en specifik tid.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__times__category_id_new-instance_method" title="#GET /times/:category_id/new (instance method)">#<strong>GET /times/:category_id/new</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Visar alla tider som finns i en kategori.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__users__id_edit-instance_method" title="#GET /users/:id/edit (instance method)">#<strong>GET /users/:id/edit</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__users__id_show-instance_method" title="#GET /users/:id/show (instance method)">#<strong>GET /users/:id/show</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__users_new-instance_method" title="#GET /users/new (instance method)">#<strong>GET /users/new</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#get_form_time_info-instance_method" title="#get_form_time_info (instance method)">#<strong>get_form_time_info</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Hämta tids-datan från formuläret där man skickar in tider.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#get_user_id-instance_method" title="#get_user_id (instance method)">#<strong>get_user_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Hämta användar-id:t hos den inloggade användaren (från sessions).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__categories-instance_method" title="#POST /categories (instance method)">#<strong>POST /categories</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Skapar en ny kategori i databasen.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__categories__id_delete-instance_method" title="#POST /categories/:id/delete (instance method)">#<strong>POST /categories/:id/delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Raderar en kategori.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__categories__id_update-instance_method" title="#POST /categories/:id/update (instance method)">#<strong>POST /categories/:id/update</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Uppdaterar ett kategorinamn.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__likes__user_id__category_id-instance_method" title="#POST /likes/:user_id/:category_id (instance method)">#<strong>POST /likes/:user_id/:category_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__login-instance_method" title="#POST /login (instance method)">#<strong>POST /login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__times__category_id-instance_method" title="#POST /times/:category_id (instance method)">#<strong>POST /times/:category_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Skapar en ny tid.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__times__category_id__time_id_delete-instance_method" title="#POST /times/:category_id/:time_id/delete (instance method)">#<strong>POST /times/:category_id/:time_id/delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__users-instance_method" title="#POST /users (instance method)">#<strong>POST /users</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__users__id_update-instance_method" title="#POST /users/:id/update (instance method)">#<strong>POST /users/:id/update</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Model.html#check_time_input_accepted-instance_method" title="Model#check_time_input_accepted (method)">#check_time_input_accepted</a></span>, <span class='object_link'><a href="Model.html#connect_to_db-instance_method" title="Model#connect_to_db (method)">#connect_to_db</a></span>, <span class='object_link'><a href="Model.html#delete_category-instance_method" title="Model#delete_category (method)">#delete_category</a></span>, <span class='object_link'><a href="Model.html#delete_rel-instance_method" title="Model#delete_rel (method)">#delete_rel</a></span>, <span class='object_link'><a href="Model.html#delete_time-instance_method" title="Model#delete_time (method)">#delete_time</a></span>, <span class='object_link'><a href="Model.html#exists_category_name%3F-instance_method" title="Model#exists_category_name? (method)">#exists_category_name?</a></span>, <span class='object_link'><a href="Model.html#exists_username%3F-instance_method" title="Model#exists_username? (method)">#exists_username?</a></span>, <span class='object_link'><a href="Model.html#get_all_categories-instance_method" title="Model#get_all_categories (method)">#get_all_categories</a></span>, <span class='object_link'><a href="Model.html#get_all_categories_by_user_id-instance_method" title="Model#get_all_categories_by_user_id (method)">#get_all_categories_by_user_id</a></span>, <span class='object_link'><a href="Model.html#get_all_categories_liked_by_user-instance_method" title="Model#get_all_categories_liked_by_user (method)">#get_all_categories_liked_by_user</a></span>, <span class='object_link'><a href="Model.html#get_all_times_by_user_id-instance_method" title="Model#get_all_times_by_user_id (method)">#get_all_times_by_user_id</a></span>, <span class='object_link'><a href="Model.html#get_all_times_from_category-instance_method" title="Model#get_all_times_from_category (method)">#get_all_times_from_category</a></span>, <span class='object_link'><a href="Model.html#get_all_users_liking_category-instance_method" title="Model#get_all_users_liking_category (method)">#get_all_users_liking_category</a></span>, <span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">#get_category</a></span>, <span class='object_link'><a href="Model.html#get_category_name-instance_method" title="Model#get_category_name (method)">#get_category_name</a></span>, <span class='object_link'><a href="Model.html#get_rel-instance_method" title="Model#get_rel (method)">#get_rel</a></span>, <span class='object_link'><a href="Model.html#get_time-instance_method" title="Model#get_time (method)">#get_time</a></span>, <span class='object_link'><a href="Model.html#get_time_user_id-instance_method" title="Model#get_time_user_id (method)">#get_time_user_id</a></span>, <span class='object_link'><a href="Model.html#get_user-instance_method" title="Model#get_user (method)">#get_user</a></span>, <span class='object_link'><a href="Model.html#get_user_id_with_id-instance_method" title="Model#get_user_id_with_id (method)">#get_user_id_with_id</a></span>, <span class='object_link'><a href="Model.html#get_user_id_with_username-instance_method" title="Model#get_user_id_with_username (method)">#get_user_id_with_username</a></span>, <span class='object_link'><a href="Model.html#get_user_with_username-instance_method" title="Model#get_user_with_username (method)">#get_user_with_username</a></span>, <span class='object_link'><a href="Model.html#get_username_with_id-instance_method" title="Model#get_username_with_id (method)">#get_username_with_id</a></span>, <span class='object_link'><a href="Model.html#insert_category-instance_method" title="Model#insert_category (method)">#insert_category</a></span>, <span class='object_link'><a href="Model.html#insert_rel-instance_method" title="Model#insert_rel (method)">#insert_rel</a></span>, <span class='object_link'><a href="Model.html#insert_time-instance_method" title="Model#insert_time (method)">#insert_time</a></span>, <span class='object_link'><a href="Model.html#insert_user-instance_method" title="Model#insert_user (method)">#insert_user</a></span>, <span class='object_link'><a href="Model.html#name_accepted%3F-instance_method" title="Model#name_accepted? (method)">#name_accepted?</a></span>, <span class='object_link'><a href="Model.html#parsetime-instance_method" title="Model#parsetime (method)">#parsetime</a></span>, <span class='object_link'><a href="Model.html#password_accepted%3F-instance_method" title="Model#password_accepted? (method)">#password_accepted?</a></span>, <span class='object_link'><a href="Model.html#sort_times-instance_method" title="Model#sort_times (method)">#sort_times</a></span>, <span class='object_link'><a href="Model.html#time_to_string-instance_method" title="Model#time_to_string (method)">#time_to_string</a></span>, <span class='object_link'><a href="Model.html#update_category_name-instance_method" title="Model#update_category_name (method)">#update_category_name</a></span>, <span class='object_link'><a href="Model.html#update_password-instance_method" title="Model#update_password (method)">#update_password</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="confirm_logged_in-instance_method">
  
    #<strong>confirm_logged_in</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Se till att användaren är inloggad, annars visas meddelande</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


585
586
587
588
589</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 585</span>

<span class='kw'>def</span> <span class='id identifier rubyid_confirm_logged_in'>confirm_logged_in</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du är inte inloggad, logga in eller registrera dig för att kunna göra detta</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hem</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="display_information-instance_method">
  
    #<strong>display_information</strong>(mes, link_t, link)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Omdirigerar användaren till en sida som visar information till användaren</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>mes,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>meddelande som ska visas</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>link_t,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>länktext som ska visas</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>link,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>routen som användaren ska skickas till</p>
</div>
      
    </li>
  
</ul>




</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42
43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_display_information'>display_information</span><span class='lparen'>(</span><span class='id identifier rubyid_mes'>mes</span><span class='comma'>,</span> <span class='id identifier rubyid_link_t'>link_t</span><span class='comma'>,</span> <span class='id identifier rubyid_link'>link</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:message</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_mes'>mes</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:link_text</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_link_t'>link_t</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:link</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_link'>link</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/inform</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__-instance_method">
  
    #<strong>GET /</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Visa startsida</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 15</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:index</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__categories-instance_method">
  
    #<strong>GET /categories</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Visar alla kategorier som finns</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51
52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 49</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/categories</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Hämta alla kategorier som finns
</span>    <span class='id identifier rubyid_categories'>categories</span> <span class='op'>=</span> <span class='id identifier rubyid_get_all_categories'><span class='object_link'><a href="Model.html#get_all_categories-instance_method" title="Model#get_all_categories (method)">get_all_categories</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    
    <span class='comment'>#Visa dem för användaren
</span>    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;categories/index&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span> <span class='lbrace'>{</span><span class='label'>categories:</span> <span class='id identifier rubyid_categories'>categories</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__categories__id-instance_method">
  
    #<strong>GET /categories/:id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Visar alla tider för en viss kategori</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id:t för kategorin vi tittar på</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#get_all_times_from_category-instance_method" title="Model#get_all_times_from_category (method)">Model#get_all_times_from_category</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">Model#get_category</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#sort_times-instance_method" title="Model#sort_times (method)">Model#sort_times</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#get_username_with_id-instance_method" title="Model#get_username_with_id (method)">Model#get_username_with_id</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#get_rel-instance_method" title="Model#get_rel (method)">Model#get_rel</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#get_all_users_liking_category-instance_method" title="Model#get_all_users_liking_category (method)">Model#get_all_users_liking_category</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 76</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/categories/:id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_category_id'>category_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
    
    <span class='comment'>#Hämta alla tider som finns sparade för denna kategorin
</span>    <span class='id identifier rubyid_times'>times</span> <span class='op'>=</span> <span class='id identifier rubyid_get_all_times_from_category'><span class='object_link'><a href="Model.html#get_all_times_from_category-instance_method" title="Model#get_all_times_from_category (method)">get_all_times_from_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
    
    <span class='comment'>#Hämta information om kategorin
</span>    <span class='id identifier rubyid_cat'>cat</span> <span class='op'>=</span> <span class='id identifier rubyid_get_category'><span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">get_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>

    <span class='comment'>#Hämta användarnamnet bakom kategorin
</span>    <span class='id identifier rubyid_creator'>creator</span> <span class='op'>=</span> <span class='id identifier rubyid_get_username_with_id'><span class='object_link'><a href="Model.html#get_username_with_id-instance_method" title="Model#get_username_with_id (method)">get_username_with_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_cat'>cat</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>username</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    
    <span class='comment'>#Sorterar alla tider så att ranklistan ordnas efter dem
</span>    <span class='id identifier rubyid_sort_times'><span class='object_link'><a href="Model.html#sort_times-instance_method" title="Model#sort_times (method)">sort_times</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_times'>times</span><span class='rparen'>)</span>

    <span class='comment'>#Hitta användarnamnen för alla tider i ranklistan (i sorterad ordning förstås)
</span>    <span class='id identifier rubyid_times'>times</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_time'>time</span><span class='op'>|</span>
        <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_time'>time</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
        
        <span class='comment'>#Från id:t - hämta användarnamnet och spara det också som en nyckel (par + värde) i vår times-dictionary
</span>        <span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_get_username_with_id'><span class='object_link'><a href="Model.html#get_username_with_id-instance_method" title="Model#get_username_with_id (method)">get_username_with_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_time'>time</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>username</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_username'>username</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>username</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='comment'>#Se om personen är inloggad
</span>    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_does_like'>does_like</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>!=</span> <span class='kw'>nil</span>
        <span class='comment'>#Se om den här användaren gillar denna kategorin eller inte
</span>        <span class='id identifier rubyid_like'>like</span> <span class='op'>=</span> <span class='id identifier rubyid_get_rel'><span class='object_link'><a href="Model.html#get_rel-instance_method" title="Model#get_rel (method)">get_rel</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='comma'>,</span> <span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_like'>like</span> <span class='op'>!=</span> <span class='kw'>nil</span>
            <span class='id identifier rubyid_does_like'>does_like</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'>#Hämta alla användare som gillar den här kategorin med en inner join
</span>    <span class='id identifier rubyid_users_liking'>users_liking</span> <span class='op'>=</span> <span class='id identifier rubyid_get_all_users_liking_category'><span class='object_link'><a href="Model.html#get_all_users_liking_category-instance_method" title="Model#get_all_users_liking_category (method)">get_all_users_liking_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>

    <span class='comment'>#Visa ranklistan för användaren
</span>    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;categories/show&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span> <span class='lbrace'>{</span><span class='label'>times:</span> <span class='id identifier rubyid_times'>times</span><span class='comma'>,</span> <span class='label'>cat:</span> <span class='id identifier rubyid_cat'>cat</span><span class='comma'>,</span> <span class='label'>creator:</span> <span class='id identifier rubyid_creator'>creator</span><span class='comma'>,</span> <span class='label'>does_like:</span> <span class='id identifier rubyid_does_like'>does_like</span><span class='comma'>,</span> <span class='label'>users_liking:</span> <span class='id identifier rubyid_users_liking'>users_liking</span><span class='comma'>,</span> <span class='label'>user_id:</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__categories__id_edit-instance_method">
  
    #<strong>GET /categories/:id/edit</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Visar ett formulär där man kan ändra ett kategorinamn</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id:t för kategorin vi tittar på</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#get_user_id-instance_method" title="#get_user_id (method)">#get_user_id</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">Model#get_category</a></span></li>
    
      <li><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">#display_information</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 125</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/categories/:id/edit</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Hämta kategori-id som vi hanterar (från parametrar)
</span>    <span class='id identifier rubyid_category_id'>category_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>

    <span class='comment'>#Hämta användar-id: (bara inloggade användare får ändra på en kategori)
</span>    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_id'><span class='object_link'><a href="#get_user_id-instance_method" title="#get_user_id (method)">get_user_id</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    
    <span class='comment'>#Hämta user_id för den som äger denna kategorin
</span>    <span class='id identifier rubyid_category'>category</span> <span class='op'>=</span> <span class='id identifier rubyid_get_category'><span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">get_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_owner_id'>owner_id</span> <span class='op'>=</span> <span class='id identifier rubyid_category'>category</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

    <span class='comment'>#Det är naturligtvis bara den som skapat (äger) denna kategorin som kan ändra namnet på den
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>!=</span> <span class='id identifier rubyid_owner_id'>owner_id</span>
        <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du är inte skaparen av denna kategorin. Du kan inte ändra namn på en kategori som någon annan äger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tillbaka till kategorin</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_category_id'>category_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;categories/edit&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span> <span class='lbrace'>{</span><span class='label'>category:</span> <span class='id identifier rubyid_category'>category</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__categories_new-instance_method">
  
    #<strong>GET /categories/new</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Visar ett formulär som användaren kan fylla i för att skapa en ny kategori</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61
62
63
64
65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 59</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/categories/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Detta får bara inloggade användare göra
</span>    <span class='id identifier rubyid_confirm_logged_in'><span class='object_link'><a href="#confirm_logged_in-instance_method" title="#confirm_logged_in (method)">confirm_logged_in</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='comment'>#Visa formuläret för den som var inloggad
</span>    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;categories/new&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__inform-instance_method">
  
    #<strong>GET /inform</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sida som informerar användaren om nånting</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23
24
25
26
27
28
29
30
31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 21</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/inform</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:message</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_link_text'>link_text</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:link_text</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_link'>link</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:link</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>==</span> <span class='kw'>nil</span> <span class='op'>||</span> <span class='id identifier rubyid_link_text'>link_text</span> <span class='op'>==</span> <span class='kw'>nil</span> <span class='op'>||</span> <span class='id identifier rubyid_link'>link</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='comment'>#Om det i framtiden läggs till flera error-hanterare och man missar att
</span>        <span class='comment'>#specifiera en beskrivning av felmeddelandet så visas detta som default
</span>        <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Det har uppstått ett fel, vänligen kontakta Ludvig Sandh.</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_link_text'>link_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hem</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_link'>link</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;helper/inform&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span> <span class='lbrace'>{</span><span class='label'>message:</span> <span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='label'>link_text:</span> <span class='id identifier rubyid_link_text'>link_text</span><span class='comma'>,</span> <span class='label'>link:</span> <span class='id identifier rubyid_link'>link</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__login-instance_method">
  
    #<strong>GET /login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Users</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


364
365
366</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 364</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;auth/login&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__logout-instance_method">
  
    #<strong>GET /logout</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


410
411
412
413
414</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 410</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/logout</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;auth/logout&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__times__category_id__time_id-instance_method">
  
    #<strong>GET /times/:category_id/:time_id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Visar detaljer om en specifik tid</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:category_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id:t för kategorin som tiden finns i</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:time_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id:t för tiden som vi kollar på</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">Model#get_category</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#get_time-instance_method" title="Model#get_time (method)">Model#get_time</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#get_username_with_id-instance_method" title="Model#get_username_with_id (method)">Model#get_username_with_id</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 281</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/times/:category_id/:time_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Detta får vem som helst göra
</span>
    <span class='comment'>#Hämta vilket kategori-id som tiden finns i
</span>    <span class='id identifier rubyid_category_id'>category_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:category_id</span><span class='rbracket'>]</span>

    <span class='comment'>#Hämta kategorinamnet för denna kategorin
</span>    <span class='id identifier rubyid_category'>category</span> <span class='op'>=</span> <span class='id identifier rubyid_get_category'><span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">get_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>

    <span class='comment'>#Hämta vilket tids-id som tiden har
</span>    <span class='id identifier rubyid_time_id'>time_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:time_id</span><span class='rbracket'>]</span>

    <span class='comment'>#Hämta data om denna tiden
</span>    <span class='id identifier rubyid_time'>time</span> <span class='op'>=</span> <span class='id identifier rubyid_get_time'><span class='object_link'><a href="Model.html#get_time-instance_method" title="Model#get_time (method)">get_time</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_time_id'>time_id</span><span class='rparen'>)</span>

    <span class='comment'>#Från id:t - hämta användarnamnet och skicka med det också i locals
</span>    <span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_get_username_with_id'><span class='object_link'><a href="Model.html#get_username_with_id-instance_method" title="Model#get_username_with_id (method)">get_username_with_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'>#Visa denna tiden i mer detalj
</span>    <span class='comment'>#Här vill vi också att vi ska se användarnamnet sen, och inte användar-id:t
</span>    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;times/show&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span> <span class='lbrace'>{</span><span class='label'>cat:</span> <span class='id identifier rubyid_category'>category</span><span class='comma'>,</span> <span class='label'>time:</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='label'>username:</span> <span class='id identifier rubyid_username'>username</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__times__category_id_new-instance_method">
  
    #<strong>GET /times/:category_id/new</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Visar alla tider som finns i en kategori</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:category_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id:t för kategorin som tiden finns i</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#confirm_logged_in-instance_method" title="#confirm_logged_in (method)">#confirm_logged_in</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">Model#get_category</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


260
261
262
263
264
265
266
267
268
269
270
271
272</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 260</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/times/:category_id/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Hämta vilket kategori-id som användaren vill lägga till en tid för
</span>    <span class='id identifier rubyid_category_id'>category_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:category_id</span><span class='rbracket'>]</span>

    <span class='comment'>#Detta får bara inloggade användare göra
</span>    <span class='id identifier rubyid_confirm_logged_in'><span class='object_link'><a href="#confirm_logged_in-instance_method" title="#confirm_logged_in (method)">confirm_logged_in</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='comment'>#Hämta kategorinamnet för denna kategorin
</span>    <span class='id identifier rubyid_category'>category</span> <span class='op'>=</span> <span class='id identifier rubyid_get_category'><span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">get_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>

    <span class='comment'>#Visa formuläret för den som är inloggad
</span>    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;times/new&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span> <span class='lbrace'>{</span><span class='label'>category:</span> <span class='id identifier rubyid_category'>category</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__users__id_edit-instance_method">
  
    #<strong>GET /users/:id/edit</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


491
492
493
494
495
496
497
498
499</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 491</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/:id/edit</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Hämta användar-id:t som vi vill kolla profilen för
</span>    <span class='id identifier rubyid_profile_user_id'>profile_user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>

    <span class='comment'>#Hämta information om profilen
</span>    <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user'><span class='object_link'><a href="Model.html#get_user-instance_method" title="Model#get_user (method)">get_user</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_profile_user_id'>profile_user_id</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;users/edit&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span> <span class='lbrace'>{</span><span class='label'>user:</span> <span class='id identifier rubyid_user'>user</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__users__id_show-instance_method">
  
    #<strong>GET /users/:id/show</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 465</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/:id/show</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Hämta användar-id:t som vi vill kolla profilen för
</span>    <span class='id identifier rubyid_profile_user_id'>profile_user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>

    <span class='comment'>#Hämta information om profilen
</span>    <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user'><span class='object_link'><a href="Model.html#get_user-instance_method" title="Model#get_user (method)">get_user</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_profile_user_id'>profile_user_id</span><span class='rparen'>)</span>

    <span class='comment'>#Hämta alla kategorier som användaren skapat
</span>    <span class='id identifier rubyid_created_cats'>created_cats</span> <span class='op'>=</span> <span class='id identifier rubyid_get_all_categories_by_user_id'><span class='object_link'><a href="Model.html#get_all_categories_by_user_id-instance_method" title="Model#get_all_categories_by_user_id (method)">get_all_categories_by_user_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_profile_user_id'>profile_user_id</span><span class='rparen'>)</span>

    <span class='comment'>#Hämta alla tider som användaren skickat in
</span>    <span class='id identifier rubyid_submitted_times'>submitted_times</span> <span class='op'>=</span> <span class='id identifier rubyid_get_all_times_by_user_id'><span class='object_link'><a href="Model.html#get_all_times_by_user_id-instance_method" title="Model#get_all_times_by_user_id (method)">get_all_times_by_user_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_profile_user_id'>profile_user_id</span><span class='rparen'>)</span>

    <span class='comment'>#Dessa sparar än så länge inte tidens kategoris namn, så vi kan
</span>    <span class='comment'>#fixa det genom att loopa igenom varje tid och hämta det från db
</span>    <span class='id identifier rubyid_submitted_times'>submitted_times</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_time'>time</span><span class='op'>|</span>
        <span class='id identifier rubyid_cat_name'>cat_name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_category_name'><span class='object_link'><a href="Model.html#get_category_name-instance_method" title="Model#get_category_name (method)">get_category_name</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>category_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_time'>time</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>category_name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_cat_name'>cat_name</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='comment'>#Hämta alla kategorier som den här användaren gillar med en inner join
</span>    <span class='id identifier rubyid_categories_liking'>categories_liking</span> <span class='op'>=</span> <span class='id identifier rubyid_get_all_categories_liked_by_user'><span class='object_link'><a href="Model.html#get_all_categories_liked_by_user-instance_method" title="Model#get_all_categories_liked_by_user (method)">get_all_categories_liked_by_user</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;users/show&quot;</span><span class='comma'>,</span> <span class='label'>locals:</span> <span class='lbrace'>{</span><span class='label'>user:</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='label'>created_cats:</span> <span class='id identifier rubyid_created_cats'>created_cats</span><span class='comma'>,</span> <span class='label'>submitted_times:</span> <span class='id identifier rubyid_submitted_times'>submitted_times</span><span class='comma'>,</span> <span class='label'>categories_liking:</span> <span class='id identifier rubyid_categories_liking'>categories_liking</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__users_new-instance_method">
  
    #<strong>GET /users/new</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


416
417
418</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 416</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&quot;users/new&quot;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_form_time_info-instance_method">
  
    #<strong>get_form_time_info</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Hämta tids-datan från formuläret där man skickar in tider</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


592
593
594</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 592</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_form_time_info'>get_form_time_info</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='lbracket'>[</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:hours</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:minutes</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:seconds</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:fractions</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_i</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_user_id-instance_method">
  
    #<strong>get_user_id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Hämta användar-id:t hos den inloggade användaren (från sessions)</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


580
581
582</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 580</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_user_id'>get_user_id</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__categories-instance_method">
  
    #<strong>POST /categories</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Skapar en ny kategori i databasen</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#get_user_id-instance_method" title="#get_user_id (method)">#get_user_id</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#name_accepted%3F-instance_method" title="Model#name_accepted? (method)">Model#name_accepted?</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#exists_category_name%3F-instance_method" title="Model#exists_category_name? (method)">Model#exists_category_name?</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#insert_category-instance_method" title="Model#insert_category (method)">Model#insert_category</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#insert_category-instance_method" title="Model#insert_category (method)">Model#insert_category</a></span></li>
    
      <li><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">#display_information</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 229</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/categories</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Detta får bara inloggade användare göra
</span>    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_id'><span class='object_link'><a href="#get_user_id-instance_method" title="#get_user_id (method)">get_user_id</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='comment'>#Hämta data från formuläret
</span>    <span class='id identifier rubyid_cat_name'>cat_name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>

    <span class='comment'>#Kontrollera att det nya kategorinamnet är tillåtet
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_name_accepted?'><span class='object_link'><a href="Model.html#name_accepted%3F-instance_method" title="Model#name_accepted? (method)">name_accepted?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_cat_name'>cat_name</span><span class='rparen'>)</span>

        <span class='comment'>#Kontrollera att det inte redan finns en kategori med detta namnet
</span>        <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_exists_category_name?'><span class='object_link'><a href="Model.html#exists_category_name%3F-instance_method" title="Model#exists_category_name? (method)">exists_category_name?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_cat_name'>cat_name</span><span class='rparen'>)</span>

            <span class='comment'>#Lägg in kategorin i databasen, och omdirigera användaren till kategorisidan
</span>            <span class='id identifier rubyid_insert_category'><span class='object_link'><a href="Model.html#insert_category-instance_method" title="Model#insert_category (method)">insert_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_cat_name'>cat_name</span><span class='comma'>,</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='rparen'>)</span>

            <span class='comment'>#Skicka tillbaka användaren till kategorilistan
</span>            <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/categories</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Det finns redan en kategori med detta namnet</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Prova igen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/new</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ditt kategorinamn får inte vara tomt eller bestå av endast blanksteg</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Prova igen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/new</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__categories__id_delete-instance_method">
  
    #<strong>POST /categories/:id/delete</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Raderar en kategori</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id:t för kategorin vi tittar på</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#get_user_id-instance_method" title="#get_user_id (method)">#get_user_id</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">Model#get_category</a></span></li>
    
      <li><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">#display_information</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#delete_category-instance_method" title="Model#delete_category (method)">Model#delete_category</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 198</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/categories/:id/delete</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Hämta kategori-id som vi hanterar (från parametrar)
</span>    <span class='id identifier rubyid_category_id'>category_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
    
    <span class='comment'>#Hämta användar-id: (bara inloggade användare får ändra på en kategori)
</span>    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_id'><span class='object_link'><a href="#get_user_id-instance_method" title="#get_user_id (method)">get_user_id</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    
    <span class='comment'>#Hämta user_id för den som äger denna kategorin
</span>    <span class='id identifier rubyid_category'>category</span> <span class='op'>=</span> <span class='id identifier rubyid_get_category'><span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">get_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_owner_id'>owner_id</span> <span class='op'>=</span> <span class='id identifier rubyid_category'>category</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

    <span class='comment'>#Det är naturligtvis bara den som skapat (äger) denna kategorin som får radera den
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>!=</span> <span class='id identifier rubyid_owner_id'>owner_id</span>
        <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du är inte skaparen av denna kategorin. Du kan inte radera en kategori som någon annan äger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tillbaka till kategorier</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_category_id'>category_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='comment'>#Vi raderar kategorin, samt alla tider som hör till denna kategorin
</span>        <span class='id identifier rubyid_delete_category'><span class='object_link'><a href="Model.html#delete_category-instance_method" title="Model#delete_category (method)">delete_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    
    <span class='comment'>#Skicka tillbaka användaren till kategorilistan
</span>    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__categories__id_update-instance_method">
  
    #<strong>POST /categories/:id/update</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Uppdaterar ett kategorinamn</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id:t för kategorin vi tittar på</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#get_user_id-instance_method" title="#get_user_id (method)">#get_user_id</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">Model#get_category</a></span></li>
    
      <li><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">#display_information</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#name_accepted%3F-instance_method" title="Model#name_accepted? (method)">Model#name_accepted?</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#exists_category_name%3F-instance_method" title="Model#exists_category_name? (method)">Model#exists_category_name?</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#update_category_name-instance_method" title="Model#update_category_name (method)">Model#update_category_name</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 153</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/categories/:id/update</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Hämta kategori-id som vi hanterar (från parametrar)
</span>    <span class='id identifier rubyid_category_id'>category_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
    
    <span class='comment'>#Hämta användar-id: (bara inloggade användare får ändra på en kategori)
</span>    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_id'><span class='object_link'><a href="#get_user_id-instance_method" title="#get_user_id (method)">get_user_id</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    
    <span class='comment'>#Hämta user_id för den som äger denna kategorin
</span>    <span class='id identifier rubyid_category'>category</span> <span class='op'>=</span> <span class='id identifier rubyid_get_category'><span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">get_category</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_owner_id'>owner_id</span> <span class='op'>=</span> <span class='id identifier rubyid_category'>category</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

    <span class='comment'>#Det är naturligtvis bara den som skapat (äger) denna kategorin som kan ändra namnet på den
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>!=</span> <span class='id identifier rubyid_owner_id'>owner_id</span>
        <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du är inte skaparen av denna kategorin. Du kan inte ändra namn på en kategori som någon annan äger</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tillbaka till kategorier</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_category_id'>category_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    
    <span class='comment'>#Användaren är authorized. Hämta datan, dvs det nya namnet på kategorin, från formuläret
</span>    <span class='id identifier rubyid_new_cat_name'>new_cat_name</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:new_name</span><span class='rbracket'>]</span>

    <span class='comment'>#Kontrollera att det nya kategorinamnet är tillåtet
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_name_accepted?'><span class='object_link'><a href="Model.html#name_accepted%3F-instance_method" title="Model#name_accepted? (method)">name_accepted?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_new_cat_name'>new_cat_name</span><span class='rparen'>)</span>

        <span class='comment'>#Kontrollera att det inte redan finns en kategori med detta namnet
</span>        <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_exists_category_name?'><span class='object_link'><a href="Model.html#exists_category_name%3F-instance_method" title="Model#exists_category_name? (method)">exists_category_name?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_new_cat_name'>new_cat_name</span><span class='rparen'>)</span>

            <span class='comment'>#Lägg in kategorin i databasen, och omdirigera användaren till kategorisidan
</span>            <span class='id identifier rubyid_update_category_name'><span class='object_link'><a href="Model.html#update_category_name-instance_method" title="Model#update_category_name (method)">update_category_name</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_new_cat_name'>new_cat_name</span><span class='comma'>,</span> <span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>

            <span class='comment'>#Skicka användaren till den nyligen skapade kategorin
</span>            <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_category_id'>category_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Det finns redan en kategori med detta namnet</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Prova igen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/new</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ditt kategorinamn får inte vara tomt eller bestå av endast blanksteg</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Prova igen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/new</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__likes__user_id__category_id-instance_method">
  
    #<strong>POST /likes/:user_id/:category_id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 552</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/likes/:user_id/:category_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Om användaren inte är inloggad än
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du måste vara inloggad för att göra detta.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Logga in</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'>#Hämta parameterdata från formuläret
</span>    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_category_id'>category_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:category_id</span><span class='rbracket'>]</span>

    <span class='comment'>#Se om det finns sparad data om den här gillningen
</span>    <span class='id identifier rubyid_like'>like</span> <span class='op'>=</span> <span class='id identifier rubyid_get_rel'><span class='object_link'><a href="Model.html#get_rel-instance_method" title="Model#get_rel (method)">get_rel</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='comma'>,</span> <span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
    
    <span class='comment'>#Om användaren redan gillar den här kategorin, och vill &quot;ogilla&quot; den
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_like'>like</span> <span class='op'>!=</span> <span class='kw'>nil</span>
        <span class='comment'>#&quot;ogilla&quot; kategorin, alltså radera den här relationen
</span>        <span class='id identifier rubyid_delete_rel'><span class='object_link'><a href="Model.html#delete_rel-instance_method" title="Model#delete_rel (method)">delete_rel</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='comma'>,</span> <span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='comment'>#&quot;gilla&quot; kategorin, lägg till relationen mellan user och kategori
</span>        <span class='id identifier rubyid_insert_rel'><span class='object_link'><a href="Model.html#insert_rel-instance_method" title="Model#insert_rel (method)">insert_rel</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='comma'>,</span> <span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_category_id'>category_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__login-instance_method">
  
    #<strong>POST /login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 368</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Hämta användarnamnet som användaren skrev in (input i formuläret)
</span>    <span class='id identifier rubyid_username_input'>username_input</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:username_input</span><span class='rbracket'>]</span>

    <span class='comment'>#Hämta lösenordet som användaren skrev in
</span>    <span class='id identifier rubyid_password_input'>password_input</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password_input</span><span class='rbracket'>]</span>

    <span class='comment'>#Hämta det krypterade lösenordet från användaren som har det inskrivna användarnamnet
</span>    <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_with_username'><span class='object_link'><a href="Model.html#get_user_with_username-instance_method" title="Model#get_user_with_username (method)">get_user_with_username</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username_input'>username_input</span><span class='rparen'>)</span>

    <span class='comment'>#Om det inte fanns någon användare med detta användarnamnet, informera användaren
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du har skrivit in fel användarnamn eller lösenord</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Prova igen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        
        <span class='comment'>#Det lagrade krypterade lösenordet för användaren
</span>        <span class='id identifier rubyid_password_digest'>password_digest</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pw_digest</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

        <span class='comment'>#Låt BCrypt hantera det krypterade lösenordet så att vi kan jämföra det sedan
</span>        <span class='comment'>#Om det inskrivna lösenordet stämmer överens med BCrypts beräknade jämförelsebara värde
</span>        <span class='kw'>if</span> <span class='const'>BCrypt</span><span class='op'>::</span><span class='const'>Password</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_password_digest'>password_digest</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='id identifier rubyid_password_input'>password_input</span>

            <span class='comment'>#Hämta användar-id hos usern
</span>            <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

            <span class='comment'>#Spara användar-id i sessions så att användaren kan fortsätta vara inloggad medan hen besöker hemsidan
</span>            <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_user_id'>user_id</span>

            <span class='comment'>#Spara användarnamnet i sessions också så att vi lätt kan komma åt det
</span>            <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_username_input'>username_input</span>

            <span class='comment'>#Informera användaren att hen är inloggad
</span>            <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Välkommen tillbaka </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_username_input'>username_input</span><span class='embexpr_end'>}</span><span class='tstring_content'>! Du är nu inloggad.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ta mig till startsidan</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>else</span>
            <span class='comment'>#Lösenordet stämde inte
</span>            <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du har skrivit in fel användarnamn eller lösenord</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Prova igen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='comment'>#metoden display_information redirectar användaren så en redirect här behövs inte
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__times__category_id-instance_method">
  
    #<strong>POST /times/:category_id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Skapar en ny tid</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:category_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id:t för kategorin som tiden finns i</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:time_id,</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>id:t för tiden som vi kollar på</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#get_category-instance_method" title="Model#get_category (method)">Model#get_category</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#get_time-instance_method" title="Model#get_time (method)">Model#get_time</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#get_username_with_id-instance_method" title="Model#get_username_with_id (method)">Model#get_username_with_id</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 311</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/times/:category_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Hämta vilket kategori-id som användaren vill lägga till en tid för
</span>    <span class='id identifier rubyid_category_id'>category_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:category_id</span><span class='rbracket'>]</span>

    <span class='comment'>#Detta får bara inloggade användare göra
</span>    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_id'><span class='object_link'><a href="#get_user_id-instance_method" title="#get_user_id (method)">get_user_id</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='comment'>#Hämta tiden som skickats in av användaren
</span>    <span class='id identifier rubyid_hours'>hours</span><span class='comma'>,</span> <span class='id identifier rubyid_mins'>mins</span><span class='comma'>,</span> <span class='id identifier rubyid_secs'>secs</span><span class='comma'>,</span> <span class='id identifier rubyid_fracs'>fracs</span> <span class='op'>=</span> <span class='id identifier rubyid_get_form_time_info'><span class='object_link'><a href="#get_form_time_info-instance_method" title="#get_form_time_info (method)">get_form_time_info</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    
    <span class='comment'>#Kontrollera att tiden är tillåten
</span>    <span class='id identifier rubyid_check_time_input_accepted'><span class='object_link'><a href="Model.html#check_time_input_accepted-instance_method" title="Model#check_time_input_accepted (method)">check_time_input_accepted</a></span></span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_hours'>hours</span><span class='comma'>,</span> <span class='id identifier rubyid_mins'>mins</span><span class='comma'>,</span> <span class='id identifier rubyid_secs'>secs</span><span class='comma'>,</span> <span class='id identifier rubyid_fracs'>fracs</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_category_id'>category_id</span><span class='rparen'>)</span>

    <span class='comment'>#Formatera tidssträngen
</span>    <span class='id identifier rubyid_time_string'>time_string</span> <span class='op'>=</span> <span class='id identifier rubyid_time_to_string'><span class='object_link'><a href="Model.html#time_to_string-instance_method" title="Model#time_to_string (method)">time_to_string</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hours'>hours</span><span class='comma'>,</span> <span class='id identifier rubyid_mins'>mins</span><span class='comma'>,</span> <span class='id identifier rubyid_secs'>secs</span><span class='comma'>,</span> <span class='id identifier rubyid_fracs'>fracs</span><span class='rparen'>)</span>
    
    <span class='comment'>#Hämta datumet och klockslaget för denna tidens inskickning
</span>    <span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%A, %B %d %Y - %k:%M:%S</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='comment'>#lägg till dbtråd som sparar tiden
</span>    <span class='id identifier rubyid_insert_time'><span class='object_link'><a href="Model.html#insert_time-instance_method" title="Model#insert_time (method)">insert_time</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_time_string'>time_string</span><span class='comma'>,</span> <span class='id identifier rubyid_date'>date</span><span class='comma'>,</span> <span class='id identifier rubyid_category_id'>category_id</span><span class='comma'>,</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_category_id'>category_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__times__category_id__time_id_delete-instance_method">
  
    #<strong>POST /times/:category_id/:time_id/delete</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 336</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/times/:category_id/:time_id/delete</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Hämta tids-id som vi hanterar (från parametrar)
</span>    <span class='id identifier rubyid_time_id'>time_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:time_id</span><span class='rbracket'>]</span>

    <span class='comment'>#Hämta kategori-id:t
</span>    <span class='id identifier rubyid_category_id'>category_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:category_id</span><span class='rbracket'>]</span>

    <span class='comment'>#Hämta användar-id: (bara inloggade användare får ändra på en tid)
</span>    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_id'><span class='object_link'><a href="#get_user_id-instance_method" title="#get_user_id (method)">get_user_id</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    
    <span class='comment'>#Hämta user_id för den som äger denna tiden
</span>    <span class='id identifier rubyid_owner_id'>owner_id</span> <span class='op'>=</span> <span class='id identifier rubyid_get_time_user_id'><span class='object_link'><a href="Model.html#get_time_user_id-instance_method" title="Model#get_time_user_id (method)">get_time_user_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_time_id'>time_id</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

    <span class='comment'>#Det är naturligtvis bara den som skapat (äger) denna tiden som får radera den
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>!=</span> <span class='id identifier rubyid_owner_id'>owner_id</span>
        <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du är inte skaparen av denna tiden. Du kan inte radera en tid som tillhör någon annan</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tillbaka till tiden</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/times/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_category_id'>category_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time_id'>time_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='comment'>#Vi raderar tiden
</span>        <span class='id identifier rubyid_delete_time'><span class='object_link'><a href="Model.html#delete_time-instance_method" title="Model#delete_time (method)">delete_time</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_time_id'>time_id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    
    <span class='comment'>#Skicka tillbaka användaren till tidslistan
</span>    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/categories/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_category_id'>category_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__users-instance_method">
  
    #<strong>POST /users</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 420</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Hämta användarnamnet som användaren skrev in (input i formuläret)
</span>    <span class='id identifier rubyid_username_input'>username_input</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:username_input</span><span class='rbracket'>]</span>

    <span class='comment'>#Hämta lösenordet som användaren skrev in
</span>    <span class='id identifier rubyid_password_input'>password_input</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password_input</span><span class='rbracket'>]</span>

    <span class='comment'>#Hämta det bekräftade lösenordet som användaren skrev in
</span>    <span class='id identifier rubyid_password_confirm_input'>password_confirm_input</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password_confirm_input</span><span class='rbracket'>]</span>

    <span class='comment'>#Om det inte fanns någon användare med detta användarnamnet redan
</span>    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_exists_username?'><span class='object_link'><a href="Model.html#exists_username%3F-instance_method" title="Model#exists_username? (method)">exists_username?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username_input'>username_input</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_password_input'>password_input</span> <span class='op'>==</span> <span class='id identifier rubyid_password_confirm_input'>password_confirm_input</span>

            <span class='comment'>#Kontrollera att användarnamnet är accepterat
</span>            <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_name_accepted?'><span class='object_link'><a href="Model.html#name_accepted%3F-instance_method" title="Model#name_accepted? (method)">name_accepted?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username_input'>username_input</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ditt användarnamn får inte vara tomt eller bestå av endast blanksteg</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Prova igen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/users/new</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='kw'>end</span>

            <span class='comment'>#Kontrollera att lösenordet är accepterat
</span>            <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_password_accepted?'><span class='object_link'><a href="Model.html#password_accepted%3F-instance_method" title="Model#password_accepted? (method)">password_accepted?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_password_input'>password_input</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ditt lösenord måste bestå av minst 8 distinkta tecken</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Prova igen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/users/new</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='kw'>end</span>

            <span class='comment'>#Låt BCrypt hasha + salta lösenordet
</span>            <span class='id identifier rubyid_password_digest'>password_digest</span> <span class='op'>=</span> <span class='const'>BCrypt</span><span class='op'>::</span><span class='const'>Password</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='id identifier rubyid_password_input'>password_input</span><span class='rparen'>)</span>

            <span class='id identifier rubyid_insert_user'><span class='object_link'><a href="Model.html#insert_user-instance_method" title="Model#insert_user (method)">insert_user</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username_input'>username_input</span><span class='comma'>,</span> <span class='id identifier rubyid_password_digest'>password_digest</span><span class='rparen'>)</span>
            
            <span class='comment'>#Hitta användarens id från databasen och spara det i session
</span>            <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user_id_with_username'><span class='object_link'><a href="Model.html#get_user_id_with_username-instance_method" title="Model#get_user_id_with_username (method)">get_user_id_with_username</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username_input'>username_input</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_user_id'>user_id</span>
            <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_username_input'>username_input</span>

            <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hej </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_username_input'>username_input</span><span class='embexpr_end'>}</span><span class='tstring_content'>! Du har nu registrerat dig!</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ta mig till startsidan</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lösenordet stämde inte överens med det bekräftade lösenordet</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Prova igen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/users/new</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Det finns redan en användare med användarnamnet </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_username_input'>username_input</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Prova igen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/users/new</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'>#metoden display_information redirectar användaren så en redirect här behövs inte
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__users__id_update-instance_method">
  
    #<strong>POST /users/:id/update</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'controller.rb', line 501</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/:id/update</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'>#Hämta användar-id:t som vi vill ändra profilen för
</span>    <span class='id identifier rubyid_profile_user_id'>profile_user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

    <span class='comment'>#Hämta användar-id:t
</span>    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span>

    <span class='comment'>#Om dessa inte stämmer överens har inte användaren authorization för att ändra lösenord
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_profile_user_id'>profile_user_id</span> <span class='op'>!=</span> <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>||</span> <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du har inte behörighet att ändra lösenordet hos den här användaren</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tillbaka</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/users/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_profile_user_id'>profile_user_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/show</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='comment'>#Hämta de inskrivna lösenorden
</span>        <span class='id identifier rubyid_current_password_input'>current_password_input</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:current_password</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_new_password_input'>new_password_input</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:new_password</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_confirm_new_password_input'>confirm_new_password_input</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:confirm_new_password</span><span class='rbracket'>]</span>

        <span class='comment'>#Hämta referens till databasen
</span>        <span class='id identifier rubyid_db'>db</span> <span class='op'>=</span> <span class='id identifier rubyid_connect_to_db'><span class='object_link'><a href="Model.html#connect_to_db-instance_method" title="Model#connect_to_db (method)">connect_to_db</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>

        <span class='comment'>#Hämta det krypterade lösenordet från användaren
</span>        <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_get_user'><span class='object_link'><a href="Model.html#get_user-instance_method" title="Model#get_user (method)">get_user</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='rparen'>)</span>

        <span class='comment'>#Det lagrade krypterade lösenordet för användaren
</span>        <span class='id identifier rubyid_password_digest'>password_digest</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pw_digest</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

        <span class='comment'>#Låt BCrypt hantera det krypterade lösenordet så att vi kan jämföra det sedan
</span>        <span class='comment'>#Om det inskrivna lösenordet stämmer överens med BCrypts beräknade jämförelsebara värde
</span>        <span class='kw'>if</span> <span class='const'>BCrypt</span><span class='op'>::</span><span class='const'>Password</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_password_digest'>password_digest</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='id identifier rubyid_current_password_input'>current_password_input</span>

            <span class='kw'>if</span> <span class='id identifier rubyid_new_password_input'>new_password_input</span> <span class='op'>==</span> <span class='id identifier rubyid_confirm_new_password_input'>confirm_new_password_input</span>

                <span class='comment'>#Låt BCrypt hasha + salta det nya lösenordet
</span>                <span class='id identifier rubyid_password_digest'>password_digest</span> <span class='op'>=</span> <span class='const'>BCrypt</span><span class='op'>::</span><span class='const'>Password</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='id identifier rubyid_new_password_input'>new_password_input</span><span class='rparen'>)</span>
                
                <span class='comment'>#Uppdatera det nya lösenordet i databasen
</span>                <span class='id identifier rubyid_update_password'><span class='object_link'><a href="Model.html#update_password-instance_method" title="Model#update_password (method)">update_password</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_password_digest'>password_digest</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>

                <span class='comment'>#Informera användaren att hen har bytt lösenord
</span>                <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du har nu ändrat lösenordet.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tillbaka</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/users/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_id'>user_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/show</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='kw'>else</span>
                <span class='comment'>#Informera om att de nya lösenorden inte stämde överens
</span>                <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dina nya lösenord stämde inte överens.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tillbaka</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/users/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_id'>user_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/show</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='kw'>end</span>

        <span class='kw'>else</span>
            <span class='comment'>#Lösenordet stämde inte
</span>            <span class='id identifier rubyid_display_information'><span class='object_link'><a href="#display_information-instance_method" title="#display_information (method)">display_information</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du har skrivit in fel lösenord</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Prova igen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/users/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_id'>user_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/show</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Apr 22 23:16:49 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.7.2).
</div>

    </div>
  </body>
</html>